#define _MI_
#include "archdep.h"


        .word $7400
        * = $7400

l7400   jmp l8c9e

_bitmapSkull
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03
	.byt $00,$00,$00,$07,$1f,$7f,$ff,$ff,$07,$3f,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$80,$f0,$fc,$ff,$ff,$ff,$ff,$ff
	.byt $00,$00,$00,$80,$c0,$f0,$fc,$ff,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $03,$0f,$0f,$1f,$3f,$7f,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $80,$c0,$e0,$f0,$f0,$fc,$fe,$fe,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $01,$01,$02,$03,$07,$07,$07,$0f,$7f,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$fe,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $00,$80,$80,$c0,$c0,$c0,$c0,$c0,$0f,$0f,$0f,$0f,$0f,$1f,$1f,$1f
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$e0,$e0,$e0,$e0,$e0,$e0,$c0,$c0
	.byt $1f,$1f,$1f,$0f,$0f,$0f,$0f,$0f,$ff,$ff,$ff,$ff,$fe,$f8,$f0,$f0
	.byt $ff,$ff,$f8,$80,$00,$00,$00,$00,$ff,$ff,$7f,$3f,$1f,$17,$0f,$0f
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$fc,$f0,$e0,$e0,$e0,$e0,$c0
	.byt $ff,$7f,$01,$00,$00,$00,$00,$00,$ff,$ff,$ff,$7f,$7f,$1f,$1f,$1f
	.byt $c0,$c0,$c0,$80,$80,$80,$80,$80,$07,$07,$07,$07,$07,$03,$03,$03
	.byt $f0,$e0,$e0,$e0,$e0,$e0,$f0,$f0,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $03,$07,$07,$07,$0f,$1f,$7f,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $c0,$c0,$c0,$c0,$c0,$e0,$f0,$f8,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $1f,$1f,$1f,$1f,$1f,$1f,$3f,$3f,$80,$80,$80,$c0,$c0,$c0,$c0,$c0
	.byt $03,$03,$03,$03,$03,$03,$03,$03,$f0,$f8,$fc,$fe,$ff,$ff,$ff,$ff
	.byt $01,$07,$0f,$1f,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$fe,$fe,$fc,$fc,$f8
	.byt $b7,$83,$03,$01,$01,$00,$00,$00,$fe,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $00,$80,$e0,$ff,$ff,$ff,$ff,$ff,$3f,$7f,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $c0,$c0,$c0,$c0,$c0,$c0,$c0,$80,$03,$03,$01,$01,$01,$00,$00,$00
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$7f,$7f,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $f8,$f8,$f0,$f0,$f8,$f8,$ff,$ff,$00,$00,$00,$00,$00,$a1,$ff,$ff
	.byt $7f,$7f,$7f,$7f,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ff,$ff,$ff,$ff,$fe,$fe,$fc,$78,$80,$80,$00,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$3f,$3f,$1e,$1f,$0f,$0f,$0f,$07
	.byt $ff,$f7,$cf,$cf,$cf,$c7,$c7,$cf,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$fb
	.byt $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $ef,$e1,$f1,$f1,$f3,$f3,$f3,$f7,$f8,$f0,$f0,$e0,$e0,$e0,$e0,$e0
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $07,$07,$07,$07,$07,$03,$03,$03,$ff,$fb,$eb,$fb,$ff,$fd,$fa,$fa
	.byt $ef,$52,$52,$52,$e2,$7e,$e7,$a4,$79,$79,$11,$11,$11,$17,$fc,$92
	.byt $ff,$35,$01,$05,$15,$7f,$cd,$4d,$ff,$9f,$af,$bf,$bf,$ff,$ef,$5f
	.byt $e0,$e0,$e0,$e0,$c0,$c0,$c0,$c0,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$03,$01,$01,$00,$00,$00,$00,$00
	.byt $ff,$ff,$ff,$ff,$7f,$7f,$3f,$1f,$a4,$ec,$ff,$ff,$ff,$ff,$ff,$ff
	.byt $96,$96,$97,$ef,$ff,$ff,$ff,$ff,$49,$cb,$cf,$7f,$ff,$ff,$ff,$ff
	.byt $7f,$ff,$ff,$ff,$fe,$fc,$f8,$f0,$80,$80,$00,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$0f,$07,$03,$00,$00,$00,$00,$00
	.byt $ff,$ff,$ff,$ff,$3f,$0f,$00,$00,$ff,$ff,$ff,$ff,$ff,$ff,$00,$00
	.byt $ff,$ff,$ff,$fe,$fc,$f0,$00,$00,$e0,$c0,$80,$00,$00,$00,$00,$00
	.byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

l7763
strTableRace
        .aasc "lizar",$e4
        .aasc "huma",$ee
        .aasc "el",$e6
        .aasc "dwar",$e6
        .aasc "bobbi",$f4
_strTableReadyWeapon
        .aasc "hand",$f3
        .aasc "dagge",$f2
        .aasc "mac",$e5
        .aasc "ax",$e5
        .aasc "rope & spike",$f3
        .aasc "swor",$e4
        .aasc "great swor",$e4
        .aasc "bow & arrow",$f3
        .aasc "amule",$f4
        .aasc "wan",$e4
        .aasc "staf",$e6
        .aasc "triangl",$e5
        .aasc "pisto",$ec
        .aasc "light swor",$e4
        .aasc "phazo",$f2
        .aasc "blaste",$f2
strTableWeapons
l77ec
        .aasc "hand",$f3
        .aasc "dagge",$f2
        .aasc "mac",$e5
        .aasc "ax",$e5
        .aasc "rop",$e5
        .aasc "swor",$e4
        .aasc "g swor",$e4
        .aasc "bo",$f7
        .aasc "amule",$f4
        .aasc "wan",$e4
        .aasc "staf",$e6
        .aasc "triangl",$e5
        .aasc "pisto",$ec
        .aasc "l swor",$e4
        .aasc "phazo",$f2
        .aasc "blaste",$f2
_strTableAttributes
l7842
        .aasc "Hit point",$f3
        .aasc "Strengt",$e8
        .aasc "Agilit",$f9
        .aasc "Stamin",$e1
        .aasc "Charism",$e1
        .aasc "Wisdo",$ed
        .aasc "Intelligenc",$e5
        .aasc "Gol",$e4
        .aasc "Rac",$e5
        .aasc "Typ",$e5
_strTableSpell
        .aasc "Praye",$f2
        .aasc "Ope",$ee
        .aasc "Unloc",$eb
        .aasc "Magic Missil",$e5
        .aasc "Stea",$ec
        .aasc "Ladder Dow",$ee
        .aasc "Ladder U",$f0
        .aasc "Blin",$eb
        .aasc "Creat",$e5
        .aasc "Destro",$f9
        .aasc "Kil",$ec
_strTableReadyArmour
        .aasc "ski",$ee
        .aasc "leather armou",$f2
        .aasc "chain mai",$ec
        .aasc "plate mai",$ec
        .aasc "vacuum sui",$f4
        .aasc "reflect sui",$f4
l7911
_strTableClass
        .aasc "peasan",$f4
        .aasc "fighte",$f2
        .aasc "cleri",$e3
        .aasc "wizar",$e4
        .aasc "thie",$e6
_strTableTransport
        .aasc "foo",$f4
        .aasc "hors",$e5
        .aasc "car",$f4
        .aasc "raf",$f4
        .aasc "frigat",$e5
        .aasc "airca",$f2
        .aasc "shuttl",$e5
        .aasc "phanto",$ed
        .aasc "star cruise",$f2
        .aasc "battle bas",$e5
        .aasc "time machin",$e5
_strTableDirection
_strTableCommands
l797f
        .aasc "Nort",$e8
        .aasc "Sout",$e8
        .aasc "Eas",$f4
        .aasc "Wes",$f4
        .aasc "Pas",$f3
        .aasc "Attack",$a0
        .aasc "Board",$a0
        .aasc "Cast",$a0
        .aasc "Dro",$f0
        .aasc "Ente",$f2
        .aasc "Fire",$a0
        .aasc "Ge",$f4
        .aasc "HyperJum",$f0
        .aasc "Inform and searc",$e8
        .aasc "K-lim",$e2
        .aasc "Nois",$e5
        .aasc "Ope",$ee
        .aasc "Quit- saving game..",$ae
        .aasc "Ready Weapon,Armour,Spell:",$a0
        .aasc "Stea",$ec
        .aasc "Transac",$f4
        .aasc "Unloc",$eb
        .aasc "Vie",$f7
        .aasc "X-i",$f4
        .aasc "Ztat",$f3
l7a30
        .aasc "Red Ge",$ed
        .aasc "Green Ge",$ed
        .aasc "Blue Ge",$ed
        .aasc "White Ge",$ed

        .byt $0a,$05,$04,$03,$02,$01,$04,$06,$08,$0a,$01,$02,$04,$06,$08
        l7a69 = * + 9
        l7a6a = * + 10
        l7a6f = * + 15
        .byt $02,$04,$06,$08,$09,$0a,$02,$02,$03,$03,$03,$04,$04,$04,$05,$05
        .byt $05,$06,$06,$06,$07,$07,$07,$08,$08,$08,$09,$09,$09,$0a,$0a
        .asc " "
        .asc "     "
l7a85
        .aasc "Ness creatur",$e5
        .aasc "giant squi",$e4
        .aasc "dragon turtl",$e5
        .aasc "pirate shi",$f0
        .aasc "hoo",$e4
        .aasc "bea",$f2
        .aasc "hidden arche",$f2
        .aasc "dark knigh",$f4
        .aasc "evil tren",$f4
        .aasc "thie",$e6
        .aasc "or",$e3
        .aasc "knigh",$f4
        .aasc "necromance",$f2
        .aasc "evil range",$f2
        .aasc "wandering warloc",$eb
        .aasc "range",$f2
        .aasc "skeleto",$ee
        .aasc "thie",$e6
        .aasc "giant ra",$f4
        .aasc "ba",$f4
        .aasc "giant spide",$f2
        .aasc "vipe",$f2
        .aasc "or",$e3
        .aasc "cyclop",$f3
        .aasc "gelatinous cub",$e5
        .aasc "etti",$ee
        .aasc "mimi",$e3
        .aasc "lizard ma",$ee
        .aasc "minotau",$f2
        .aasc "carrion creepe",$f2
        .aasc "tangle",$f2
        .aasc "gremli",$ee
        .aasc "wandering eye",$f3
        .aasc "wrait",$e8
        .aasc "lic",$e8
        .aasc "invisible seeke",$f2
        .aasc "mind whippe",$f2
        .aasc "zor",$ee
        .aasc "daemo",$ee
        .aasc "balro",$ee
; strTableLands
l7bda
        .aasc "Lord Britis",$e8
        .aasc "the Feudal Lord",$f3
        .aasc "the Dark Unknow",$ee
        .aasc "Danger and Despai",$f2

l7c18
        .byt $1f,$14,$03,$02,$06,$24,$16,$35,$1e,$04,$2a,$0f,$3d
l7c25   jsr $3622
        l7c2e = * + 6
        .byt $15,$38,$1b,$38,$0f,$5e,$56,$7b,$5a,$48,$43,$5d,$71,$53,$66,$74
        .asc ""
        .byt $6b,$5c,$5d,$78,$4f,$64,$6a,$48,$7c
l7c41   ror $a1,x
        lda #$84
        lda $b7
        ldy $a28e,x
        ldy l8b99
        sty $a3,x
        ldx #$87
        bcs $7bee
        .byt $95
        .asc "7"
        .byt $83,$89
        .asc "_TCBFdVu"
        .byt $de
        .asc "DjO"
        .asc "}`bvUx[xO"
        .byt $1e,$16,$3b,$1a,$08,$03,$31
        l7c77 = * + 4
        .byt $1d,$13,$26,$34,$2b,$1c,$1d,$38,$0f,$24,$2a,$08,$3c,$36,$1f,$14
        .byt $03,$02,$06,$24,$35,$16,$1e,$04,$2a,$0f,$3d
l7c8e   jsr $3622
        .byt $15,$38,$1b,$38,$0f,$1f,$14,$03,$02,$06,$24,$16,$35,$1e,$04,$2a
        .byt $0f,$3d
l7ca3   jsr $3622
        .byt $15,$38,$1b,$38,$0f,$21,$29,$04,$25,$37,$3c,$0e,$22,$2c,$19,$0b
        .byt $14,$23,$22,$07
l7cba   bmi $7cd7
l7cbc   ora $37,x
        .byt $03,$09

l7cc0
        .aasc "The Castle of Lord Britis",$e8
        .aasc "The Castle of the Lost Kin",$e7
        .aasc "The Tower of Knowledg",$e5
        .aasc "The Pillars of Protectio",$ee
        .aasc "The Dungeon of Perini",$e1
        .aasc "The Lost Cavern",$f3
        .aasc "The Mines of Mt. Dras",$e8
        .aasc "The Mines of Mt. Drash I",$c9
        .aasc "Mondain's Gate to Hel",$ec
        .aasc "The Unholy Hol",$e5
        .aasc "The Dungeon of Doub",$f4
        .aasc "The Dungeon of Monto",$f2
        .aasc "Death's Awakenin",$e7
        .aasc "Britai",$ee
        .aasc "Moo",$ee
        .aasc "Faw",$ee
        .aasc "Paw",$f3
        .aasc "Monto",$f2
        .aasc "Ye",$f7
        .aasc "Tun",$e5
        .aasc "Gre",$f9
        .aasc "The Castle Baratari",$e1
        .aasc "The Castle Rondorli",$ee
        .aasc "The Pillar of Ozymandia",$f3
        .aasc "The Pillars of the Argonaut",$f3
        .aasc "Scorpion Hol",$e5
        .aasc "The Savage Plac",$e5
        .aasc "The Horror of the Harpie",$f3
        .aasc "The Horror of the Harpies I",$c9
        .aasc "Advari's Hol",$e5
        .aasc "The Labyrint",$e8
        .aasc "The Gorgon's Hol",$e5
        .aasc "Where Hercules Die",$e4
        .aasc "The Dead Warrior's Figh",$f4
        .aasc "Arnol",$e4
        .aasc "Lind",$e1
        .aasc "Hele",$ee
        .aasc "Owe",$ee
        .aasc "Joh",$ee
        .aasc "Gerr",$f9
        .aasc "Wol",$e6
        .aasc "The Snak",$e5
        .aasc "The Castle of Olympu",$f3
        .aasc "The Black Dragon's Castl",$e5
        .aasc "The Sign Pos",$f4
        .aasc "The Southern Sign Pos",$f4
        .aasc "The Metal Twiste",$f2
        .aasc "The Troll's Hol",$e5
        .aasc "The Viper's Pi",$f4
        .aasc "The Viper's Pit I",$c9
        .aasc "The Guild of Deat",$e8
        .aasc "The End..",$ae
        .aasc "The Tramp of Doo",$ed
        .aasc "The Long Deat",$e8
        .aasc "The Slow Deat",$e8
        .aasc "Nassa",$f5
        .aasc "Clear Lagoo",$ee
        .aasc "Stou",$f4
        .aasc "Gauntle",$f4
        .aasc "Imaginatio",$ee
        .aasc "Ponde",$f2
        .aasc "Wealt",$e8
        .aasc "Poo",$f2
        .aasc "The White Dragon's Castl",$e5
        .aasc "The Castle of Shamin",$ef
        .aasc "The Grave of the Lost Sou",$ec
        .aasc "Eastern Sign Pos",$f4
        .aasc "Spine Breake",$f2
        .aasc "Free Death Hol",$e5
        .aasc "The Dead Cat's Lif",$e5
        .aasc "The Dead Cat's Life I",$c9
        .aasc "The Morbid Adventur",$e5
        .aasc "The Skull Smashe",$f2
        .aasc "Dead Man's Wal",$eb
        .aasc "The Dungeon of Doo",$ed
        .aasc "Hole to Hade",$f3
        .aasc "Gorla",$e2
        .aasc "Dextro",$ee
        .aasc "Magi",$e3
        .aasc "Wheele",$f2
        .aasc "Bulldoze",$f2
        .aasc "The Brothe",$f2
        .aasc "The Turtl",$e5
        .aasc "Lost Friend",$f3

l8175   bcc l818e
        jsr print
        .aasc $7d,"Disk error ",$00
        jsr l8b64
        jsr $164f
        sec
l818e   rts

l818f   lda $5c
        bne l8196
l8193   jsr $1646
l8196   lda #$97
        sta Cia2PortA
        lda #$18
        sta VicMemCtrlReg
        lda #$00
        sta $5c
        sta $5d
        rts
l81a7   l81ad = * + 6
        .byt $00,$28,$00,$18,$00,$00,$00,$2f,$55
l81b0   and ($2e),y
        bvc l8200
        l81c3 = * + 15
        .asc ""

        .byt $41,$59,$45,$52,$2f,$55,$31,$2e,$56,$41,$52,$53,$00,$00,$00,$00
l81c4   l81c5 = * + 1
        .byt $00,$05
l81c6   l81c7 = * + 1
; Instruction opcode accessed.
        bvc l81c8
l81c8
        .byt $00

_commandKeys
l81c9
        ; allowed commands
        .aasc "@/;: ABCDEFGHIKNOQRSTUVXZ"

; stats
l81e2
        .asc "J"
        .byt $01,$00,$00,$ff

l81e7
        .byt $ff
l81e8   l81ea = * + 2
        jsr $0020
        l81ee = * + 3
        l81ef = * + 4
        l81f0 = * + 5
        l81f1 = * + 6
        .byt $00,$00,$00,$00,$00,$00,$00
l81f2   ora ($01,x)
        ora ($01,x)
        ora ($01,x)
l81f8   ora ($01,x)
        ora ($01,x)
        ora ($01,x)
        ora ($01,x)
l8200   ora ($01,x)
        ora ($01,x)
        ora ($01,x)
        ora ($01,x)
l8208   ora ($03,x)
        l8213 = * + 9
        .byt $03,$03,$00,$03,$03,$03,$03,$03,$03,$01,$01,$01,$01,$01,$01,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$ff,$ff,$ff,$ff
        l822b = * + 1
        .byt $00,$00
;statsGender
l822c   l822d = * + 1
; Instruction opcode accessed.
        ora ($47,x)
        jmp ($6e69)
        l823b = * + 10
        l823c = * + 11
        .asc ""
        .byt $64,$61,$00,$00,$00,$00,$00,$00,$00,$00,$84,$03,$5a,$00,$5a,$00
        l8249 = * + 8
        l824a = * + 9
        l824b = * + 10
        l824d = * + 12
        l824f = * + 14
        l8250 = * + 15
        .byt $0f,$00,$0f,$00,$32,$00,$0f,$00,$38,$08,$02,$00,$02,$00,$00,$00
        l8259 = * + 8
        l825a = * + 9
        l825b = * + 10
        l825c = * + 11
        l825d = * + 12
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$95,$59,$00,$37,$02
        .asc "h"
        .byt $03
        .asc "h"
        .byt $03,$00,$ff
        .asc "o>"
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
        .byt $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
l83ac   inc l83b5
        bne l83b4
l83b1   inc l83b6
l83b4   l83b5 = * + 1
        l83b6 = * + 2
        lda $0200
        rts

l83b8   l83b9 = * + 1
; Instruction parameter accessed.
        l83ba = * + 2
; Instruction parameter accessed.
        lda $0200
        inc l83b9
        bne l83c3
l83c0   inc l83ba
l83c3   rts
l83c4   pha
        lsr
        lsr
        lsr
        lsr
        jsr l83cd
l83cc   pla
l83cd   and #$0f
        ora #$30
        cmp #$3a
        bcc l83d7
l83d5   adc #$06
l83d7   jsr $1667
l83da   inc zpCursorCol
l83dc   rts
l83dd   and #$7f
        cmp #$7c
        bcc l83d7
l83e3   beq l83fe
l83e5   cmp #$7e
        beq l83f3
l83e9   cmp #$7d
        bne l83dc
l83ed   lda zpCursorCol
        cmp #$02
        bcc l83f6
l83f3   jsr l83fe

l83f6   lda #$01
        sta zpCursorCol
        rts

l83fb   jsr $164f
l83fe   inc zpCursorRow
        lda zpCursorRow
        cmp $31
        bcc l8411
l8406   tya
        pha
        txa
        pha
        jsr $1649
l840d   pla
        tax
        pla
        tay
l8411   lda #$00
        sta zpCursorCol
        rts

l8416   inc $30
        dec $31
        inc $2e
        dec $2f
        dec $2f
        lda $30
        sta zpCursorRow
        bne l8411

l8426   sec
        ror l81ad
        bit !$00a2


printTableString
l842d   pla
        sta l83b5               ; set data pointer to data after RTS call
        pla
        sta l83b6
        jsr l83ac               ; read data byte
l8438   sta l83b9
        jsr l83ac               ; read data byte
l843e   sta l83ba
        lda l83b6               ; update return address
        pha
        lda l83b5
        pha

        txa
        beq l8455
l844c   jsr l83b8
l844f   asl
        bcc l844c
l8452   dex
        bne l844c

l8455   jsr l83b8               ; read character from object table
l8458   cmp #$7f                ; newline?
        beq l847f
l845c   pha
        bit l81ad
        bpl l8475
l8462   and #$7f
        cmp #$7c
        bcs l8475
l8468   cmp #$61
        bcc l8472
l846c   cmp #$7b
        bcs l8472
l8470   eor #$20
l8472   sta l81ad
l8475   jsr l83dd               ; print character
l8478   pla
        bpl l8455               ; more characters in string?
l847b   lsr l81ad
        rts

l847f   jsr l83b8
l8482   clc
        adc zpCursorCol
        sta zpCursorCol
        jmp l8455

printAtPos
l848a   stx zpCursorCol
        sty zpCursorRow

print
l848e   pla
        sta l83b5
        pla
        sta l83b6
l8496   jsr l83ac
l8499   beq l84b0
l849b   cmp #$7f
        beq l84a5
l849f   jsr l83dd
l84a2   jmp l8496
l84a5   jsr l83ac
l84a8   clc
        adc zpCursorCol
        sta zpCursorCol
        jmp l8496
l84b0   lda l83b6
        pha
        lda l83b5
        pha
        rts

l84b9   jsr l83d7
l84bc   dex
        bne l84b9
l84bf   rts
l84c0   jsr $1655
l84c3   jsr $1652
l84c6   jsr $1655
l84c9   lda #$10
        jsr l83d7
l84ce   ldx #$26
        lda #$04
        jsr l84b9
l84d5   lda #$12
        jsr $1667
l84da   inc zpCursorRow
        jsr l8411
l84df   lda #$0a
        jsr $1667
l84e4   lda #$27
        sta zpCursorCol
        lda #$08
        jsr $1667
l84ed   jsr $1673
l84f0   lda zpCursorRow
        eor #$12
        bne l84da
l84f6   sta zpCursorCol
        inc zpCursorRow
        lda #$04
        jsr l83d7
l84ff   ldx #$26
        lda #$06
        jsr l84b9
l8506   lda #$04
        jsr $1667
l850b   lda #$1e
        sta zpCursorCol
        lda #$02
        jsr $1667
l8514   lda #$0c
l8516   inc zpCursorRow
        jsr $1667
l851b   ldx zpCursorRow
        cpx #$17
        bcc l8516
l8521   rts

l8522   stx $3f
        sta $40
        ldx #$00
        stx $3c
        stx $3d
        stx $3e
        stx l857b
        stx l857a
        inx
        stx l8579
        sed
l8539   lsr $40
        ror $3f
        bcc l8555
l853f   clc
        lda $3c
        adc l8579
        sta $3c
        lda $3d
        adc l857a
        sta $3d
        lda $3e
        adc l857b
        sta $3e
l8555   clc
        lda l8579
        adc l8579
        sta l8579
        lda l857a
        adc l857a
        sta l857a
        lda l857b
        adc l857b
        sta l857b
        lda $3f
        ora $40
        bne l8539
l8577   cld
        rts
l8579   l857a = * + 1
        l857b = * + 2
        .byt $01,$00,$00
l857c   jsr l8522
l857f   inx
        bne l8588
l8582   tax
        lda #$00
        jsr l8522
l8588   sta l85bd
        jmp l8597
l858e   lda $3c,x
        lsr
        lsr
        lsr
        lsr
        jsr l85a6
l8597   txa
        bne l859d
l859a   inc l85bd
l859d   lda $3c,x
        jsr l85a6
l85a2   dex
        bpl l858e
l85a5   rts
l85a6   and #$0f
        bne l85b7
l85aa   cmp l85bd
        bne l85ba
l85af   lda l85be
        beq l85a5
l85b4   jmp l83d7
l85b7   sta l85bd
l85ba   jmp l83cd
l85bd   l85be = * + 1
        .byt $00,$00
l85bf   ldy #$ff
        sec
l85c2   iny
        sbc #$0a
        bcs l85c2
l85c7   tya
        rts
l85c9   sta $43
        jsr $1670
l85ce   cmp $43
        bcc l85d6
l85d2   sbc $43
        bcs l85ce
l85d6   cmp #$00
        sta $43
        rts
l85db   jsr $1673
l85de   lda $56
        rts
l85e1   jsr l8777
l85e4   ldy #$3d
        sty l85fc
l85e9   jsr $1ed5
l85ec   nop
        nop
        nop
        cmp #$00
        bne l85fb
l85f3   jsr $16a0
l85f6   dec l85fc
        bne l85e9
l85fb   rts
l85fc   .asc ""
        .byt $40


checkCommandKey
l85fd   ldx #24                 ; iterate over command keys
_checkCmdKeyL1
        cmp _commandKeys,x      ; valid command?
        beq _checkCmdKeyJ1      ; yes ->
        dex
        bpl _checkCmdKeyL1

        jsr print               ; illegal command key...
        .aasc "Huh?",$00
        jsr l8772
        sec
        rts
_checkCmdKeyJ1
        txa                     ; command index
        pha                     ; store
        cmp #$04
        bcs l8630
l861a   lda l81c8
        beq l8630
l861f   sta l862c
        lda l81c7
        sta l862b
        jsr printTableString
l862b   l862c = * + 1
        .word _strTableCommands
l862d   jmp l8635

l8630   jsr printTableString   ; print the command
        .word _strTableCommands
l8635
        pla                     ; restore command id
        asl                     ; as 16 bit index
        tax
        clc
        rts

l863a   clc
        bcs l8675
l863d   sty l81c5
        sta l81c6
        bcc l864a
l8645   lda #$00
        jsr $1685
l864a   sed
        sec
        lda l8259
        sbc l81c5
        sta l8259
        bcs l866a
l8657   lda l825a
        ora l825b
        beq l866a
l865f   lda l825a
        bne l8667
l8664   dec l825b
l8667   dec l825a
l866a   clc
        lda l824f
        adc l81c6
        sta l824f
        l8675 = * + 1
        bcs l8678
l8676   cld
        rts
l8678   sed
        sec
        ldx #$00
l867c   lda l8250,x
        adc #$00
        sta l8250,x
        inx
        bcs l867c
l8687   cld
        rts

l8689   jsr l870c
l868c   jsr $1658
l868f   jsr print
        .aasc "Hits ",$7c
        .aasc "Food ",$7c
        .aasc "Exp. ",$7c
        .aasc "Coin ",$00
        jmp l86c9

l86ad   cmp #$01
        bcs l86bb
l86b1   cpx #$64
        bcs l86bb
l86b5   pha
        lda #$ff
        sta $1f
        pla
l86bb   jsr l857c
l86be   jsr l83fb
l86c1   lda #$00
        sta $1f
        rts
l86c6   jsr l870c
l86c9   jsr $1658
l86cc   sta l85be
        l86d0 = * + 1
; Instruction parameter jumped to.
        lda #$24
l86d1   l86d2 = * + 1
; Instruction parameter jumped to.
        sta $2e
l86d3   lda #$04
        sta $2f
        lda l823c
        ldx l823b
        jsr l86ad
l86e0   lda l825b
        ldx l825a
        jsr l86ad
l86e9   lda l825d
        ldx l825c
        jsr l857c
l86f2   jsr l83fb
l86f5   lda l824a
        ldx l8249
        jsr l857c
l86fe   jsr $164f
l8701   ldx #$05
l8703   lda l81a7,x
        sta $2e,x
        dex
        bpl l8703
l870b   rts

l870c   ldx #$05
l870e   lda $2e,x
        sta l81a7,x
        dex
        bpl l870e
l8716   rts

l8717   ldx statsSpell
        jsr printTableString
        .word _strTableSpell
        rts

l8720   lda zpCursorRow
        asl
        asl
        asl
        tax
l8726   ldy zpCursorCol
        beq l874d
l872a   dey
        lda bmpLinePtrLb,x
        clc
        adc bmpColOffLb,y
        sta $36
        lda bmpLinePtrHb,x
        eor $5c
        adc bmpColOffHb,y
        sta $37
        ldy #$07
        lda #$00
l8742   ora ($36),y
        bne l874d
l8746   dey
        bpl l8742
l8749   dec zpCursorCol
        bne l8726
l874d   rts

l874e   jsr print
        .aasc $7d
        .aasc "Hmmmm... no effect?",$00

l8766   lda #$08
        bne l8774

l876a   jsr l8720
l876d   lda #$3f
        jsr $1667

l8772   lda #$10
l8774   jsr $1682
l8777   nop
        nop
        nop
        jsr GETIN
l877d   cmp #$00
        bne l8777
l8781   lda #$00
        sta $5b
        sta $56
        rts
l8788   jsr l870c
l878b   lda #$04
        sta $30
        sta $2e
        lda #$10
        sta $31
        lda #$20
        sta $2f
        jsr $1652
l879c   jsr l83f3
l879f   lda #$60
        jsr $168b
l87a4   jsr l87c9
l87a7   ldx #$04
        ldy #$12
        stx $26
        sty $27
        ldx #$fa
        jsr $1691
l87b4   ldx $26
        ldy #$6d
        jsr $1691
l87bb   ldx #$04
        ldy $27
        jsr $1691
l87c2   ldx $26
        ldy #$12
        jsr $1691
l87c9   lda $5c
        eor $5d
        sta $5c
        rts

l87d0   pha
        lda #$07
        sta zpCursorCol
        pla
        ldx #$03
l87d8   cmp l87f5,x             ; "SWA" (Spell, Weapon, Armour)
        beq l87e0
        dex
        bne l87d8
l87e0   txa
        asl
        tay
        lda l87fa,y
        pha                     ; -> RTS address
        lda l87f9,y
        pha
        jsr printTableString
        .word _strTableReady    ; "nothing", "spell:", "weapon:", "armour:"
        jsr $164f
        inc zpCursorCol
_readyNothing
l87f5   rts                     ; -> rts/jump to specific ready <item> routine

        .aasc "SWA"
l87f9
l87fa = * + 1
        .word _readyNothing-1
        .word _readySpell-1
        .word _readyWeapon-1
        .word _readyArmour-1

_readySpell
l8801
        lda statsSpell
        jsr _readySelectItem
        .byt 10
        .word $8208
        .word _strTableSpell
        sta statsSpell
        rts

_readyWeapon
l8810   lda statsWeapon
        jsr _readySelectItem
        .byt 15                 ; # of choices: 15
        .word $81f8
        .word _strTableReadyWeapon
        sta statsWeapon
        rts

_readyArmour
l881f   lda statsArmour
        jsr _readySelectItem
        .byt 5
        .word $81f2
        .word _strTableReadyArmour
        sta statsArmour
        rts

_strTableReady
l882e
        .aasc "nothin",$e7
        .aasc "spell",$ba
        .aasc "weapon",$ba
        .aasc "armour",$ba

_readySelectItem
l8849   sta $46
        pla
        sta l83b5
        pla
        sta l83b6
        jsr l83ac               ; fetch parameter byte
l8856   sta l890b               ; number of selections
        jsr l83ac               ; fetch parameter byte
l885c   sta $41                 ; inventory pointer
        jsr l83ac               ; fetch parameter byte
l8861   sta $42
        jsr l83ac               ; fetch parameter byte
l8866   sta l8907               ; string table pointer
        jsr l83ac               ; fetch parameter byte
l886c   sta l8908
        lda l83b6
        pha
        lda l83b5
        pha
        jsr l870c
l887a   jsr $165e
l887d   ldx #$0e
        ldy #$00
        lda $5d
        sta l81c3
        sty $5d
        jsr printAtPos
        .aasc $0e," Ready ",$18,$00
l8895   jsr $1652
l8898   ldy l890b
        ldx #$01
l889d   lda ($41),y
        beq l88a2
l88a1   inx
l88a2   dey
        bne l889d
l88a5   stx $43
        sec
        lda #$14
        sbc $43
        lsr
        sta zpCursorRow
l88af   lda #$61                ; 'a'
        sta _itemChar           ; character used for item selection
        ldy #$00
l88b6   tya
        pha                     ; store item type index
        lda #13
        sta zpCursorCol
        jsr print
_itemChar
        .aasc "a) ",$00
        pla                     ; restore item type index
        jsr l8902
        tay
        inc zpCursorRow
l88ca   cpy l890b
        bcs l88d9
        inc _itemChar
        iny
        lda ($41),y             ; item in inventory?
        bne l88b6               ; yes ->
        beq l88ca               ; no ->

l88d9   jsr l8701
l88dc   lda l81c3
        sta $5d
        jsr $1664
l88e4   jsr $1676
l88e7   pha
        jsr l8ad6
l88eb   sec
        pla
        sbc #$41                ; 'A'; make 0-based index
        beq l8902
l88f1   bmi l88ff
l88f3   cmp l890b               ; valid selection?
        bcc l88fa               ; yes ->
        bne l88ff
l88fa   tay
        lda ($41),y             ; item in inventory?
        bne l8901               ; yes ->
l88ff   ldy $46
l8901   tya

l8902   tax
        pha
        jsr l8426
l8907   l8908 = * + 1
        .byt $00,$00
l8909   pla
        rts
l890b   .byt $0a

ztats
l890c   jsr $1661
        jsr l870c
        jsr $165e
        jsr l8416
        ldx #$0c
        ldy #$00
        sty l85be
        lda $5d
        sta l81c3
        sty $5d
        jsr printAtPos
        .aasc $0e," Inventory ",$18,LF,LF
        .aasc "Player: ",$00
        jsr $8ba1
        jsr print
        .aasc LF
        .aasc "A level ",$00
        ldx l825c
        lda l825d
        jsr l8522
        lda $3d
        lsr
        lsr
        lsr
        lsr
        clc
        adc #$01
        jsr l8582
        inc zpCursorCol

        lda statsGender         ; gender
        beq _ztatsJ1            ; male? ->
        jsr print
        .aasc "fe",$00
_ztatsJ1
        jsr print
        .aasc "male ",$00
        ldx statsRace           ; race
        jsr printTableString
        .word strTableRace
        inc zpCursorCol

        ldx statsClass          ; class
        jsr printTableString
        .word _strTableClass

        jsr l8b10
l8991   dec zpCursorRow
        ldx #$00
        stx l81c4
l8998   stx $46
        txa
        asl
        tay
        ldx l823b,y
        lda l823c,y
        bne l89a9
l89a5   l89a6 = * + 1
        cpx #$00
        beq l89ae
l89a9   jsr l8b25
        .asc ""
        .byt $42
l89ad   sei
l89ae   ldx $46
        inx
        cpx #$07
        bcc l8998
l89b5   ldx l8249
        lda l824a
        jsr l8522
l89be   lda $3c
        and #$0f
        beq l89e0
l89c4   jsr l8adc
l89c7   jsr print
        .aasc "Copper pence....",$00

        lda $3c
        jsr l83cd
l89e0   lda $3c
        lsr
        lsr
        lsr
        lsr
        beq l8a04
l89e8   pha
        jsr l8adc
l89ec   jsr print
        .aasc "Silver pieces...",$00

        pla
        jsr l83cd
l8a04   lda $3d
        beq l8a41
l8a08   jsr l8adc
l8a0b   jsr print
        .aasc "Gold Crowns....",$00

        lda $3d
        cmp #$10
        bcs l8a3e
l8a24   lda #$2e
        jsr l83d7
l8a29   lda $3d
        jsr l83cd
l8a2e   jmp l8a41
        .asc ""
        .byt $45,$6e,$65,$6d,$79
l8a36   jsr $6576
        .asc ""
        .byt $73,$73,$65
l8a3c   l8a3e = * + 2
; Instruction parameter jumped to.
        jmp ($20f3)
        .asc "D"
        .byt $83
l8a41   lda l822b
        beq l8a4f
l8a46   ldx #$00
        stx $46
        jsr l8b22
l8a4d   and ($8a),y
l8a4f   lda statsArmour
        sta l81c4
        ldx #$01
l8a57   stx $46
        lda l81f2,x
        beq l8a63
l8a5e   jsr l8b22
        .asc "T"
l8a62   sei
l8a63   ldx $46
        inx
        cpx #$06
        bcc l8a57
l8a6a   lda l81f1
        sta l81c4
        ldx #$01
l8a72   stx $46
        lda l8213,x
        beq l8a7e
l8a79   jsr l8b22
l8a7c   bmi l8af7
l8a7e   ldx $46
        inx
        cpx #$0b
        bcc l8a72
l8a85   ldx #$00
        stx l81c4
l8a8a   stx $46
        lda l81ea,x
        beq l8a96
l8a91   jsr l8b22
l8a94   bmi l8b10
l8a96   ldx $46
        inx
        cpx #$04
        bcc l8a8a
l8a9d   lda statsWeapon
        sta l81c4
        ldx #$01
l8aa5   stx $46
        lda l81f8,x
        beq l8ab1
l8aac   jsr l8b22
        .asc ""
        .byt $7c,$77
l8ab1   ldx $46
        inx
        cpx #$10
        bcc l8aa5
l8ab8   lda l81ee
        sta l81c4
        ldx #$01
l8ac0   stx $46
        lda l8208,x
        beq l8acc
l8ac7   jsr l8b22
l8aca   dey
        sei
l8acc   ldx $46
        inx
        cpx #$0b
        bcc l8ac0
l8ad3   jsr l8b56
l8ad6   jsr l84c6
l8ad9   jmp l8701
l8adc   ldx #$00
        stx zpCursorCol
        ldy zpCursorRow
        iny
        cpy #$12
        bcc l8af5
l8ae7   ldy $30
        lda #$12
        sta $2f
        adc $2e
        cmp #$26
        bcs l8af8
l8af3   sta $2e
l8af5   sty zpCursorRow
l8af7   rts
l8af8   ldx #13
        ldy #18
        jsr printAtPos
        .aasc "more",$00
        jsr l8b56
l8b07   lda #$00
        sta $5d
        inc zpCursorCol
        jsr l870c
l8b10   lda #$05
        sta $30
        lsr
        sta $2e
        lda #$24
        sta $2f
        lda #$13
        sta $31
        jmp $1652
l8b22   tax
        lda #$00
l8b25   pha
        txa
        pha
        jsr l8adc
l8b2b   lda #$03
        sta zpCursorCol
        ldx #$09
        lda #$2e
        sta l85be
        jsr l84b9
l8b39   pla
        tax
        pla
        jsr l857c
l8b3f   jsr l8411
l8b42   ldx $46
        lda l81c4
        beq l8b53
l8b49   cpx l81c4
        bne l8b53
l8b4e   lda #$1b
        jsr l83d7
l8b53   jmp l8426
l8b56   lda l81c3
        sta $5d
        jsr $1664
l8b5e   jsr $1646
l8b61   jsr l8701
l8b64   jsr print
        .aasc $7d,"Press Space to continue: ",$00
        jsr l8777
l8b85   jsr $1676
l8b88   cmp #$0d
        beq l8b94
l8b8c   cmp #$1b
        beq l8b94
l8b90   cmp #$20
        bne l8b85
l8b94   jsr $164c
l8b97   inc zpCursorCol
l8b99; Instruction opcode accessed.
        dec zpCursorRow
        jsr l8777
l8b9e   jmp l870c
l8ba1   ldx #$00
l8ba3   lda l822d,x
        beq l8bae
l8ba8   jsr l83d7
l8bab   inx
        bne l8ba3
l8bae   rts
        .asc ""
        .byt $60

l8bb0   jsr print
        .aasc " off",$00        ; noise off
        rts
_noise
l8bb9   lda $1638
        eor #$ff
        sta $1638
        sta l81e7
        beq l8bb0
        jsr print
        .aasc " on",$00         ; noise on
        rts

l8bce   jsr l83ed
l8bd1   jsr l8ba1
l8bd4   jsr print
        .aasc ", thou art dead.",$00
        jsr $1646
        lda #$00
        sta l8249
        sta l824a
        sta l825a
        sta l825b
        sta l823b
        sta l823c
        ldy $5d
        sty l81c3
        sta $5d
        jsr l86c6
l8c09   jsr $1661
        lda #<_bitmapSkull
        sta $60                 ; $60/$61 = $7403
        lda #>_bitmapSkull
        sta $61
        lda #$80
        sta $62
        lda #$25
        eor $5c
        sta $63
        ldx #$0c                ; copy 12*8 raster lines
l8c20   ldy #$47                ; copy 9*8 pixels per row (72)
l8c22   lda ($60),y
        sta ($62),y
        dey
        bpl l8c22
l8c29   lda $60
        clc
        adc #$48
        sta $60
        lda $61
        adc #$00
        sta $61
        lda $62
        clc
        adc #$40
        sta $62
        lda $63
        adc #$01
        sta $63
        dex
        bne l8c20
l8c46   lda #$02
        jsr $1685
l8c4b   lda #$02
        jsr $1685
l8c50   lda l81c3
        sta $5d
        jsr $1664
l8c58   jmp l8777
l8c5b   jsr l8bce

l8c5e   lda #$01

l8c60   ldx #$ff
        txs                     ; reset stack
        cmp #$07
        bcs l8c6a               ; first time: load and start Character Generator
l8c67   tax
        bne l8c74
l8c6a   ldx #$04
        jsr loadFile            ; load "GE",$8c9e
        bcs l8c6a
        jmp l8c9e               ; jump into "GE"

l8c74   clc                     ; second time: start game
        adc #$04                ; 1+4 = 5
        sta l8c97
l8c7a   jsr l8777
l8c7d   ldx l8c97
        jsr loadFile            ; copy $e000 to $8c9e (file OU)
l8c83   jsr l8175
l8c86   bcs l8c7a
l8c88   jsr l818f
l8c8b   jsr l8689
l8c8e   jsr l84c6
l8c91   jsr l8701
l8c94   jmp l8c9e

l8c97   .byt $04
l8c98   jsr $163d
        .byt $4c,$9b,$8c

l8c9e   sei
        ldx #$ff                ; reset stack
        txs
        ldx #$0b
        jsr loadFile            ; load "ST",$0c00
        ldx #$0f
        jsr loadFile            ; load "PR",$12c0
        jsr $1655
        jsr $163a
l8cb2   lda #$60
        sta $5c
        sta $5d
        jsr $1664
l8cbb   jsr l818f
l8cbe   lda #$96
        sta Cia2PortA
        lda #$80
        sta VicMemCtrlReg
        lda #$00
        jmp l8c60
        .asc "H"
